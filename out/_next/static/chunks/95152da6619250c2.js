(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,95080,e=>{"use strict";e.s(["default",0,{yellow:"#FFD966",green:"#4CAF50",brown:"#8B4513"}])},47804,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(18566),r=e.i(95080);function l(){let[e,l]=(0,t.useState)([]),[n,d]=(0,t.useState)({}),[i,o]=(0,t.useState)(""),[c,m]=(0,t.useState)(0),[x,u]=(0,t.useState)(""),[h,g]=(0,t.useState)("credit-card"),[b,f]=(0,t.useState)(!0),[p,y]=(0,t.useState)(!1),[j,v]=(0,t.useState)(""),[N,w]=(0,t.useState)(""),S=(0,a.useRouter)();(0,t.useEffect)(()=>{setTimeout(()=>{o(localStorage.getItem("tableNumber")||""),l(JSON.parse(localStorage.getItem("cart")||"[]")),f(!1)},800)},[]);let k=(s,t)=>{let a=[...e];a[s].quantity=Math.max(1,a[s].quantity+t),l(a),localStorage.setItem("cart",JSON.stringify(a))},C=()=>e.reduce((e,s)=>e+((s.customPrice||s.price)+(s.selectedAddons?.reduce((e,s)=>e+s.price,0)||0))*s.quantity,0),_=()=>x?Number.parseFloat(x):C()*(c/100),O=()=>C()+0+_(),I=()=>{if(!p)return void y(!0);let s={id:`DQ-${Date.now()}`,tableNumber:i,customerName:j||null,customerPhone:N||null,items:e,subtotal:C(),tip:_(),estimate_time:30,total:O(),paymentMethod:h,timestamp:new Date().toISOString(),status:"preparing"},t=JSON.parse(localStorage.getItem("orders"))||[];localStorage.setItem("currentOrder",JSON.stringify(s)),localStorage.setItem("cart",JSON.stringify([])),t.push(s),localStorage.setItem("orders",JSON.stringify(t)),S.push("/order-confirmation")};return(0,s.jsxs)("div",{className:"page min-h-screen bg-gray-50 pb-32 relative",children:[(0,s.jsxs)("div",{className:"bg-white p-5 border-b sticky top-0 z-10 shadow-sm",children:[(0,s.jsxs)("div",{className:"flex items-center mb-4",children:[(0,s.jsx)("button",{onClick:()=>S.back(),className:"mr-3 w-10 h-10 flex items-center justify-center rounded-full hover:bg-gray-100 active:scale-95 transition-all",children:(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:2.5,children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})})}),(0,s.jsx)("h1",{className:"text-xl font-bold text-gray-800",children:"Your Order"})]}),(0,s.jsx)("div",{className:"p-4 rounded-xl",style:{backgroundColor:`${r.default.brown}20`},children:(0,s.jsx)("p",{className:"text-sm font-medium leading-relaxed",style:{color:r.default.brown},children:"WristWizards Integration with your restaurant's systems saves time & reduces errors."})})]}),(0,s.jsxs)("div",{className:"p-5 space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-sm font-semibold mb-2 text-gray-700",children:"Table Number"}),(0,s.jsx)("div",{className:"text-3xl font-bold",style:{color:r.default.brown},children:i})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-sm font-semibold mb-3 text-gray-700",children:"Your Items"}),b?(0,s.jsx)("div",{className:"space-y-3",children:[void 0,void 0].map((e,t)=>(0,s.jsxs)("div",{className:"bg-white rounded-2xl p-4 flex items-center gap-3 shadow-sm border border-gray-100",children:[(0,s.jsx)("div",{className:"w-20 h-20 rounded-xl bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 bg-[length:200%_100%] animate-pulse"}),(0,s.jsxs)("div",{className:"flex-1 min-w-0 space-y-2",children:[(0,s.jsx)("div",{className:"h-4 w-3/4 rounded bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 bg-[length:200%_100%] animate-pulse"}),(0,s.jsx)("div",{className:"h-3 w-1/2 rounded bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 bg-[length:200%_100%] animate-pulse"}),(0,s.jsx)("div",{className:"h-5 w-1/4 rounded bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 bg-[length:200%_100%] animate-pulse"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)("div",{className:"w-9 h-9 rounded-full bg-gray-200 animate-pulse"}),(0,s.jsx)("div",{className:"w-8 h-4 rounded bg-gray-200 animate-pulse"}),(0,s.jsx)("div",{className:"w-9 h-9 rounded-full bg-gray-200 animate-pulse"}),(0,s.jsx)("div",{className:"w-9 h-9 rounded bg-gray-200 animate-pulse"})]})]},t))}):(0,s.jsx)("div",{className:"space-y-3",children:e.map((t,a)=>(0,s.jsx)("div",{children:(0,s.jsxs)("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-gray-100",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-20 h-20 bg-gray-100 rounded-xl overflow-hidden flex-shrink-0",children:(0,s.jsx)("img",{src:t?.image||"/placeholder.svg",alt:t.name,className:"w-full h-full object-cover"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h3",{className:"font-semibold text-gray-800 text-sm mb-1",children:t.name}),(0,s.jsxs)("p",{className:"text-xs text-gray-500 mb-2",children:[t.size&&`${t.size}, `,t.spiceLevel&&`${t.spiceLevel}`]}),(0,s.jsxs)("p",{className:"font-bold text-base",style:{color:r.default.brown},children:["$",(((t.customPrice||t.price)+(t.selectedAddons?.reduce((e,s)=>e+s.price,0)||0))*t.quantity).toFixed(2)]})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("button",{onClick:()=>k(a,-1),className:"w-9 h-9 rounded-full border-2 border-gray-200 flex items-center justify-center hover:bg-gray-50 active:scale-95 transition-all font-semibold text-gray-700",children:"-"}),(0,s.jsx)("span",{className:"w-8 text-center font-bold text-gray-800",children:t.quantity}),(0,s.jsx)("button",{onClick:()=>k(a,1),className:"w-9 h-9 rounded-full border-2 border-gray-200 flex items-center justify-center hover:bg-gray-50 active:scale-95 transition-all font-semibold text-gray-700",children:"+"}),(0,s.jsx)("button",{onClick:()=>{let s;l(s=e.filter((e,s)=>s!==a)),localStorage.setItem("cart",JSON.stringify(s))},className:"ml-1 text-red-500 hover:text-red-600 w-9 h-9 flex items-center justify-center active:scale-95 transition-all",children:(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:2,children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),t.addons&&t.addons.length>0&&(0,s.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-100",children:[(0,s.jsxs)("button",{onClick:()=>{d(e=>({...e,[a]:!e[a]}))},className:"flex items-center justify-between w-full text-sm font-semibold transition-colors",style:{color:r.default.brown},children:[(0,s.jsxs)("span",{children:["Customize (",t.selectedAddons?.length||0," selected)"]}),(0,s.jsx)("svg",{className:`w-5 h-5 transition-transform ${n[a]?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})})]}),n[a]&&(0,s.jsx)("div",{className:"mt-4 space-y-4",children:t.addons.map(t=>(0,s.jsxs)("div",{className:"bg-gray-50 p-4 rounded-xl",children:[(0,s.jsxs)("h4",{className:"text-sm font-semibold text-gray-800 mb-3",children:[t.name,t.required&&(0,s.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,s.jsxs)("p",{className:"text-xs text-gray-500 mb-3",children:["Select ",t.min_selection,t.max_selection>t.min_selection?`-${t.max_selection}`:""]}),(0,s.jsx)("div",{className:"space-y-2",children:t.addons.map(n=>{let d,i=(d=n._id,e[a]?.selectedAddons?.some(e=>e._id===d)||!1);return(0,s.jsxs)("label",{className:"flex items-center p-3 bg-white rounded-lg border-2 border-gray-200 hover:border-current transition-colors",style:{borderColor:i?r.default.brown:void 0},children:[(0,s.jsx)("input",{type:"checkbox",checked:i,onChange:()=>((s,t,a)=>{let r=[...e],n=r[s],d=n.selectedAddons.findIndex(e=>e._id===t);if(d>=0)n.selectedAddons.splice(d,1);else{let e=n.addons.find(e=>e._id===a);if(e){let s=e.addons.find(e=>e._id===t);s&&n.selectedAddons.push({...s,groupName:e.name,selectionType:e.selection_type,maxSelection:e.max_selection,minSelection:e.min_selection,groupId:e._id})}}l(r),localStorage.setItem("cart",JSON.stringify(r))})(a,n._id,t._id),className:"w-5 h-5 rounded cursor-pointer",style:{accentColor:r.default.brown}}),(0,s.jsx)("span",{className:"ml-3 flex-1 text-sm text-gray-800 font-medium",children:n.name}),(0,s.jsxs)("span",{className:"text-sm font-semibold",style:{color:r.default.brown},children:["+$",n.price.toFixed(2)]})]},n._id)})})]},t._id))})]})]})},a))})]}),(0,s.jsxs)("div",{className:"bg-white rounded-2xl p-5 shadow-sm border border-gray-100",children:[(0,s.jsx)("h2",{className:"font-semibold mb-4 text-gray-800 text-base",children:"Order Summary"}),(0,s.jsxs)("div",{className:"space-y-3 text-base",children:[(0,s.jsxs)("div",{className:"flex justify-between text-gray-600",children:[(0,s.jsx)("span",{children:"Subtotal"}),(0,s.jsxs)("span",{className:"font-medium",children:["$",C().toFixed(2)]})]}),(0,s.jsxs)("div",{className:"border-t-2 pt-3 flex justify-between font-bold text-lg",style:{color:r.default.brown},children:[(0,s.jsx)("span",{children:"Total"}),(0,s.jsxs)("span",{children:["$",O().toFixed(2)]})]})]})]})]}),(0,s.jsx)("div",{className:"fixed bottom-0 left-0 right-0 p-5 bg-white border-t shadow-2xl z-10 pb-safe",children:(0,s.jsx)("div",{className:"max-w-md mx-auto",children:(0,s.jsxs)("button",{onClick:I,disabled:0===e.length,className:"w-full font-bold py-5 rounded-2xl transition-all active:scale-98 shadow-lg disabled:shadow-none text-lg",style:{backgroundColor:r.default.brown,color:"white"},children:["Place Order - $",O().toFixed(2)]})})}),p&&(0,s.jsx)("div",{className:"overlay-fade fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-2xl p-6 w-full max-w-md shadow-lg",children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Your Info (Optional)"}),(0,s.jsx)("input",{type:"text",placeholder:"Enter your name",value:j,onChange:e=>v(e.target.value),className:"w-full p-4 border-2 border-gray-200 rounded-xl mb-4 focus:outline-none text-base",style:{boxShadow:`0 0 0 2px ${r.default.brown}`}}),(0,s.jsx)("input",{type:"tel",placeholder:"Enter your phone number",value:N,onChange:e=>w(e.target.value),className:"w-full p-4 border-2 border-gray-200 rounded-xl mb-4 focus:outline-none text-base",style:{boxShadow:`0 0 0 2px ${r.default.brown}`}}),(0,s.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,s.jsx)("button",{onClick:()=>{y(!1),I()},className:"px-6 py-3 bg-gray-200 rounded-xl font-medium text-gray-700 hover:bg-gray-300 transition-all",children:"Skip"}),(0,s.jsx)("button",{onClick:I,className:"px-6 py-3 rounded-xl font-medium text-white transition-all",style:{backgroundColor:r.default.brown},children:"Submit"})]})]})})]})}e.s(["default",()=>l])}]);